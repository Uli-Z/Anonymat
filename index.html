<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Anonymat</title>
    
    <!-- Configuration block (set language, etc.) -->
    <!-- CONFIG-START -->
    <script>
      window.AppConfig = {
        language: "de"
      };
    </script>
    <!-- CONFIG-END -->

    <script>
      // App version (will be replaced by build script)
      window.appVersion = "0.0.0";
    </script>
    
    <!-- Responsive meta tag for proper scaling on mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Link to external stylesheet -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Include translations and configuration scripts -->
    <script src="translations.js"></script>
    <script src="config.js"></script>
    
    <!-- Include additional libraries and modules -->
    <script src="images.js"></script>
    <script src="placeholder.js"></script>
    <script src="date.js"></script>
    <script src="anonymizer.js"></script>
    <script src="utils.js"></script>
    <script src="ui.js"></script>
    <script src="modal.js"></script>
    <script src="editor.js"></script>
    <script src="contextMenu.js"></script>

  </head>
  <body>
    <!-- Header section -->
    <header>
      <!-- Hamburger menu (visible on small screens) -->
      <div class="hamburger" id="openMenu" aria-label="Open Menu" title="Open Menu">&#9776;</div>
      
      <!-- Site title and logo -->
      <div class="header-title">
        <div class="header-logo" id="headerLogo" aria-label="Logo"></div>
        <div class="header-text">
          <h1 data-i18n="headerTitle">Anonymat</h1>
          <span data-i18n="headerSubtitle">PersÃ¶nliche Informationen lokal maskieren</span>
        </div>
      </div>
      
      <!-- Action buttons in the header using emoji icons -->
      <div class="header-actions">
        <!-- Button to add a new placeholder -->
        <button id="headerAddPlaceholder" data-i18n-alt="addPlaceholder">
          <span class="icon">â•</span>
        </button>
        <!-- Button for placeholder settings -->
        <button id="headerSettings" data-i18n-alt="settings">
          <span class="icon">ğŸ› ï¸</span>
        </button>
        <!-- Button to change the language -->
        <button id="headerGeneral" data-i18n-alt="languageChange">
          <span class="icon">ğŸŒ</span>
        </button>
        <!-- Button to show help/about information -->
        <button id="headerHelp" data-i18n-alt="help">
          <span class="icon">ğŸ’¡</span>
        </button>
        <!-- Button to view the mapping (anonymization data) -->
        <button id="headerMapping" data-i18n-alt="mapping">
          <span class="icon">ğŸ“‹</span>
        </button>
        <!-- Button to download the program as a separate file -->
        <button id="downloadProgramBtn" data-i18n-alt="programSave">
          <span class="icon">â¬‡ï¸</span>
        </button>
      </div>
    </header>
    
    <!-- Off-canvas side menu for small screens -->
    <nav id="sideMenu">
      <!-- Close button for side menu -->
      <div class="close-menu" id="closeMenu" aria-label="Close Menu" title="Close Menu">&times;</div>
      <ul>
        <li>
          <a href="#" id="menuAddPlaceholder" title="Add Placeholder" aria-label="Add Placeholder">
            <span class="icon" data-i18n-alt="addPlaceholder">â•</span>
            <span class="menu-text" data-i18n="addPlaceholder">Platzhalter hinzufÃ¼gen</span>
          </a>
        </li>
        <li>
          <a href="#" id="menuSettings" title="Placeholder Settings" aria-label="Placeholder Settings">
            <span class="icon" data-i18n-alt="settings">ğŸ› ï¸</span>
            <span class="menu-text" data-i18n="settings">Platzhaltereinstellungen</span>
          </a>
        </li>
        <li>
          <a href="#" id="menuGeneral" title="Change Language" aria-label="Change Language">
            <span class="icon" data-i18n-alt="languageChange">ğŸŒ</span>
            <span class="menu-text" data-i18n="languageChange">Sprache Ã¤ndern</span>
          </a>
        </li>
        <li>
          <a href="#" id="menuHelp" title="Help/About" aria-label="Help/About">
            <span class="icon" data-i18n-alt="help">ğŸ’¡</span>
            <span class="menu-text" data-i18n="help">Hilfe/About</span>
          </a>
        </li>
        <li>
          <a href="#" id="menuMapping" title="Show Mapping" aria-label="Show Mapping">
            <span class="icon" data-i18n-alt="mapping">ğŸ“‹</span>
            <span class="menu-text" data-i18n="mapping">Mapping anzeigen</span>
          </a>
        </li>
        <li>
          <a href="#" id="menuDownload" title="Save program as separate file" aria-label="Save program as separate file">
            <span class="icon" data-i18n-alt="programSave">â¬‡ï¸</span>
            <span class="menu-text" data-i18n="programSave">Programm speichern</span>
          </a>
        </li>
      </ul>
    </nav>
    
    <!-- Main content area -->
    <main>
      <div id="container">
        <div id="scrollable">
          <!-- Highlight layer for displaying colored overlays on detected text -->
          <pre id="highlight"></pre>
          <!-- Transparent textarea for actual text input -->
          <!-- Removed native placeholder attribute so that the placeholder is only shown in the highlight area -->
          <textarea id="editor" spellcheck="false"></textarea>
        </div>
        
        <!-- Button overlay to copy text to clipboard -->
        <button id="copyOverlayBtn" data-i18n="copyToClipboard">In Zwischenablage kopieren</button>
        
        <!-- Progress bar to show scan/anonymization status -->
        <div id="progressBar">
          <div id="progressFill"></div>
          <div id="progressText">Loading...</div>
        </div>
        
        <!-- Action buttons for anonymization and deanonymization -->
        <div id="actionButtons">
          <button class="action-btn" id="anonymizeBtn" aria-label="Anonymize" data-i18n-alt="anonymize">
            <span class="icon">ğŸ›¡ï¸</span>
            <span class="label" data-i18n="anonymize">Anonymisieren</span>
          </button>
          <button class="action-btn" id="deanonymizeBtn" aria-label="Deanonymize" data-i18n-alt="deanonymize">
            <span class="icon">ğŸ‘€</span>
            <span class="label" data-i18n="deanonymize">Deanonymisieren</span>
          </button>
        </div>
      </div>
    </main>
    
    <!-- Footer (currently empty, reserved for future use) -->
    <footer>
    </footer>
    
    <!-- Modals -->
    
    <body>
      <!-- First Run Modal -->
      <div id="firstRunModal" class="modal">
        <div class="modal-content">
          <h3 data-i18n="firstRunModal.title">
            <span class="warning-emoji">âš ï¸</span> Wichtiger Hinweis:
          </h3>
          <p data-i18n="firstRunModal.text">
            Dieses Programm Ã¼bernimmt keine Garantie fÃ¼r die hundertprozentige Erkennung sensibler Informationen in Texten. Die Endverantwortung liegt beim Benutzer. Dieses Tool dient ausschlieÃŸlich als semiautomatische UnterstÃ¼tzung zur Anonymisierung von Texten.
          </p>
          <div class="first-run-checkbox">
            <input type="checkbox" id="firstRunCheckbox">
            <label for="firstRunCheckbox" data-i18n="firstRunModal.checkbox">Ich habe das gelesen und verstanden</label>
          </div>
          <div class="first-run-button">
            <button id="firstRunOk" disabled data-i18n="firstRunModal.okButton">OK</button>
          </div>
          <div class="language-settings">
            <!-- Sprachauswahl wird dynamisch aus dem vorhandenen generalModal Ã¼bernommen -->
          </div>
        </div>
      </div>
      
      
      
    
      <!-- Existing content -->
      <!-- Header, nav, main etc. -->
    </body>
    

    <!-- Settings Modal: Allows configuration of placeholder settings -->
    <div id="settingsModal" class="modal">
      <div class="modal-content">
        <h3 data-i18n="placeholderOptions">Platzhaltereinstellungen</h3>
        <div id="placeholderOptionsContent"></div>
        <div style="text-align: center;">
          <button id="closeSettingsModalBtn" data-i18n="close">SchlieÃŸen</button>
        </div>
      </div>
    </div>
    
    <!-- General Modal: For changing the interface language -->
    <div id="generalModal" class="modal">
      <div class="modal-content">
        <h3 data-i18n="languageChange">Sprache Ã¤ndern</h3>
        <label for="languageSelect" data-i18n="languageChange">Sprache der Benutzerschnittstelle:</label>
        <select id="languageSelect" style="padding: 8px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px;">
          <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
          <option value="en">ğŸ‡¬ğŸ‡§ English</option>
        </select>
        <div style="text-align: center; margin-top: 20px;">
          <button id="closeGeneralModalBtn" data-i18n="close">SchlieÃŸen</button>
        </div>
      </div>
    </div>
    
    <!-- Help/About Modal: Provides information about the tool -->
    <div id="helpModal" class="modal">
      <div class="modal-content">
        <h3 data-i18n="helpTitle">Ãœber Anonymizer</h3>
        <p data-i18n="helpDescription">
          Anonymizer is a tool for semi-automatic masking and anonymization of personal data in texts.
        </p>
        <p data-i18n="helpLocal">
          This application runs entirely locally in your browser and does not communicate with external services.
        </p>
        <p data-i18n="helpDsGvo">
          The tool is designed to support GDPR-compliant workflows. (The GDPR â€” General Data Protection Regulation â€” is a European regulation for data privacy and security.)
        </p>
        <p data-i18n="helpResponsibility">
          Important: Anonymizer offers partial automation. The final responsibility and verification always remain with the user.
        </p>
        <p data-i18n="helpLicense">
          This project is open source and licensed under the MIT license.
        </p>
        <p data-i18n-html="helpVersion"></p>
        <div style="text-align: center; margin-top: 20px;">
          <button id="closeHelpModalBtn" data-i18n="close">SchlieÃŸen</button>
        </div>
      </div>
    </div>
    
    
    <!-- Mapping Modal: Displays the mapping between original data and placeholders -->
    <div id="mappingModal" class="modal">
      <div class="modal-content">
        <h3 data-i18n="mapping">Mapping-Liste</h3>
        <div id="mappingModalContent">
          <!-- Mapping table will be dynamically inserted here -->
        </div>
        <div style="text-align: center; margin-top: 20px;">
          <button id="resetMappingBtn">Mapping zurÃ¼cksetzen</button>
          <button id="closeMappingModalBtn" data-i18n="close">SchlieÃŸen</button>
        </div>
      </div>
    </div>
    
    <!-- Custom Placeholder Modal: For adding user-defined placeholders -->
    <div id="customPlaceholderModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h3>Platzhalter hinzufÃ¼gen</h3>
        <label for="customPattern">Muster:</label>
        <input type="text" id="customPattern" data-i18n-placeholder="customPatternPlaceholder" placeholder="Enter text to be replaced" />
        <label for="customLabel">Bezeichnung:</label>
        <input type="text" id="customLabel" placeholder="e.g. Secret" />
        <div class="modal-buttons">
          <button id="saveCustomPlaceholderBtn">Speichern</button>
          <button id="cancelCustomPlaceholderBtn">Abbrechen</button>
        </div>
      </div>
    </div>
    
    <!-- Context Menu: Provides quick actions based on text selection -->
    <div id="contextMenu" class="context-menu">
      <button id="ctxAddPlaceholder"><span class="icon">ğŸ“</span> Platzhalter hinzufÃ¼gen</button>
      <button id="ctxDoNotAnonymize"><span class="icon">â›”</span> Diesen Text nicht anonymisieren</button>
    </div>
    
    <!-- Note: Download functionality is implemented in ui.js -->
  </body>
</html>
