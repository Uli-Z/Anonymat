<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Anonymat</title>

    <!-- CONFIG-START -->
    <script>
      window.AppConfig = {
        language: "de"
      };
    </script>
    <!-- CONFIG-END -->

    <script>
      window.appVersion = "0.0.0";
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">

    <script src="translations.js"></script>
    <script src="config.js"></script>
    <script src="images.js"></script>
    <script src="placeholder.js"></script>
    <script src="date.js"></script>
    <script src="anonymizer.js"></script>
    <script src="utils.js"></script>
    <script src="ui.js"></script>
    <script src="modal.js"></script>
    <script src="editor.js"></script>
    <script src="contextMenu.js"></script>
  </head>
  <body>
    <!-- Header section -->
    <header>
      <div class="hamburger" id="openMenu" aria-label="Open Menu" title="Open Menu">&#9776;</div>
      <div class="header-title">
        <div class="header-logo" id="headerLogo" aria-label="Logo"></div>
        <div class="header-text">
          <h1 data-i18n="headerTitle">Anonymat</h1>
          <span data-i18n="headerSubtitle">PersÃ¶nliche Informationen lokal maskieren</span>
        </div>
      </div>
      <div class="header-actions">
        <button id="headerAddPlaceholder" data-i18n-alt="addPlaceholder">
          <span class="icon">â•</span>
        </button>
        <button id="headerSettings" data-i18n-alt="settings">
          <span class="icon">ğŸ› ï¸</span>
        </button>
        <button id="headerGeneral" data-i18n-alt="languageChange">
          <span class="icon">ğŸŒ</span>
        </button>
        <button id="headerHelp" data-i18n-alt="help">
          <span class="icon">ğŸ’¡</span>
        </button>
        <button id="headerMapping" data-i18n-alt="mapping">
          <span class="icon">ğŸ“‹</span>
        </button>
        <button id="downloadProgramBtn" data-i18n-alt="programSave">
          <span class="icon">â¬‡ï¸</span>
        </button>
      </div>
    </header>

    <!-- Off-canvas side menu for small screens -->
    <nav id="sideMenu">
      <div class="close-menu" id="closeMenu" aria-label="Close Menu" title="Close Menu">&times;</div>
      <ul>
        <li>
          <a href="#" id="menuAddPlaceholder">
            <span class="icon" data-i18n-alt="addPlaceholder">â•</span>
            <span class="menu-text" data-i18n="addPlaceholder">Platzhalter hinzufÃ¼gen</span>
          </a>
        </li>
        <li>
          <a href="#" id="menuSettings">
            <span class="icon" data-i18n-alt="settings">ğŸ› ï¸</span>
            <span class="menu-text" data-i18n="settings">Platzhaltereinstellungen</span>
          </a>
        </li>
        <li>
          <a href="#" id="menuGeneral">
            <span class="icon" data-i18n-alt="languageChange">ğŸŒ</span>
            <span class="menu-text" data-i18n="languageChange">Sprache Ã¤ndern</span>
          </a>
        </li>
        <li>
          <a href="#" id="menuHelp">
            <span class="icon" data-i18n-alt="help">ğŸ’¡</span>
            <span class="menu-text" data-i18n="help">Hilfe/About</span>
          </a>
        </li>
        <li>
          <a href="#" id="menuMapping">
            <span class="icon" data-i18n-alt="mapping">ğŸ“‹</span>
            <span class="menu-text" data-i18n="mapping">Mapping anzeigen</span>
          </a>
        </li>
        <li>
          <a href="#" id="menuDownload">
            <span class="icon" data-i18n-alt="programSave">â¬‡ï¸</span>
            <span class="menu-text" data-i18n="programSave">Programm speichern</span>
          </a>
        </li>
      </ul>
    </nav>

    <!-- Main content area -->
    <main>
      <div id="container">
        <div id="scrollable">
          <pre id="highlight"></pre>
          <textarea id="editor" spellcheck="false"></textarea>
        </div>

        <!-- Button overlay to copy text to clipboard -->
        <button id="copyOverlayBtn" data-i18n="copyToClipboard">In Zwischenablage kopieren</button>

        <!-- Progress bar -->
        <div id="progressBar">
          <div id="progressFill"></div>
          <div id="progressText">Loading...</div>
        </div>

        <!-- Action buttons -->
        <div id="actionButtons">
          <button class="action-btn" id="anonymizeBtn" aria-label="Anonymize" data-i18n-alt="anonymize">
            <span class="icon">ğŸ›¡ï¸</span>
            <span class="label" data-i18n="anonymize">Anonymisieren</span>
          </button>
          <button class="action-btn" id="deanonymizeBtn" aria-label="Deanonymize" data-i18n-alt="deanonymize">
            <span class="icon">ğŸ‘€</span>
            <span class="label" data-i18n="deanonymize">Deanonymisieren</span>
          </button>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
    </footer>

    <!-- First Run Modal -->
    <div id="firstRunModal" class="modal">
      <div class="modal-content">
        <h3 data-i18n="firstRunModal.title">
          <span class="warning-emoji">âš ï¸</span> Wichtiger Hinweis:
        </h3>
        <p data-i18n="firstRunModal.text">
          Dieses Programm Ã¼bernimmt keine Garantie fÃ¼r die hundertprozentige Erkennung sensibler Informationen in Texten. Die Endverantwortung liegt beim Benutzer. Dieses Tool dient ausschlieÃŸlich als semiautomatische UnterstÃ¼tzung zur Anonymisierung von Texten.
        </p>
        <div class="first-run-checkbox">
          <input type="checkbox" id="firstRunCheckbox">
          <label for="firstRunCheckbox" data-i18n="firstRunModal.checkbox">Ich habe das gelesen und verstanden</label>
        </div>
        <div class="first-run-button">
          <button id="firstRunOk" disabled data-i18n="firstRunModal.okButton">OK</button>
        </div>
        <div class="language-settings">
          <!-- Dynamisch via JavaScript gefÃ¼llt -->
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
      <div class="modal-content">
        <h3 data-i18n="placeholderOptions">Platzhaltereinstellungen</h3>
        <div id="placeholderOptionsContent"></div>
        <div style="text-align: center;">
          <button id="closeSettingsModalBtn" data-i18n="close">SchlieÃŸen</button>
        </div>
      </div>
    </div>

    <!-- General Modal -->
    <div id="generalModal" class="modal">
      <div class="modal-content">
        <h3 data-i18n="languageChange">Sprache Ã¤ndern</h3>
        <label for="languageSelect" data-i18n="languageChange">Sprache der Benutzerschnittstelle:</label>
        <select id="languageSelect" style="padding: 8px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px;">
          <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
          <option value="en">ğŸ‡¬ğŸ‡§ English</option>
        </select>
        <div style="text-align: center; margin-top: 20px;">
          <button id="closeGeneralModalBtn" data-i18n="close">SchlieÃŸen</button>
        </div>
      </div>
    </div>

    <!-- Help/About Modal -->
    <div id="helpModal" class="modal">
      <div class="modal-content">
        <h3 data-i18n="helpTitle">Ãœber Anonymat</h3>
        <p data-i18n="helpDescription">
          Anonymat ist ein Tool zur teilautomatisierten Maskierung und Anonymisierung personenbezogener Daten in Texten.
        </p>
        <p data-i18n="helpLocal">
          Diese Anwendung lÃ¤uft vollstÃ¤ndig lokal im Browser und kommuniziert nicht mit externen Diensten.
        </p>
        <p data-i18n="helpDsGvo">
          Das Tool unterstÃ¼tzt DSGVO-konforme ArbeitsablÃ¤ufe. (Die DSGVO â€“ Datenschutz-Grundverordnung â€“ ist eine europÃ¤ische Verordnung zum Schutz personenbezogener Daten.)
        </p>
        <p data-i18n="helpResponsibility">
          Wichtig: Anonymat bietet eine Teilautomatisierung. Die Endverantwortung und Kontrolle liegen immer beim Anwender.
        </p>
        <p data-i18n="helpLicense">
          Dieses Projekt ist Open Source und steht unter der GPL-3-Lizenz.
        </p>
        <p data-i18n-html="helpVersion"></p>
        <div style="text-align: center; margin-top: 20px;">
          <button id="closeHelpModalBtn" data-i18n="close">SchlieÃŸen</button>
        </div>
      </div>
    </div>

    <!-- Mapping Modal -->
    <div id="mappingModal" class="modal">
      <div class="modal-content">
        <h3 data-i18n="mapping">Mapping-Liste</h3>
        <div id="mappingModalContent"></div>
        <div style="text-align: center; margin-top: 20px;">
          <button id="resetMappingBtn">Mapping zurÃ¼cksetzen</button>
          <button id="closeMappingModalBtn" data-i18n="close">SchlieÃŸen</button>
        </div>
      </div>
    </div>

    <!-- Custom Placeholder Modal -->
    <div id="customPlaceholderModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h3 data-i18n="addPlaceholder">Platzhalter hinzufÃ¼gen</h3>
        <label for="customPattern" data-i18n-placeholder="customPatternPlaceholder">Muster:</label>
        <input type="text" id="customPattern" placeholder="Enter text to be replaced"/>
        <label for="customLabel">Bezeichnung:</label>
        <input type="text" id="customLabel" placeholder="e.g. Secret"/>
        <div class="modal-buttons">
          <button id="saveCustomPlaceholderBtn">Speichern</button>
          <button id="cancelCustomPlaceholderBtn">Abbrechen</button>
        </div>
      </div>
    </div>

    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu">
      <button id="ctxAddPlaceholder"><span class="icon">ğŸ“</span> Platzhalter hinzufÃ¼gen</button>
      <button id="ctxDoNotAnonymize"><span class="icon">â›”</span> Diesen Text nicht anonymisieren</button>
    </div>

    <!-- Test Results Modal -->
    <div id="testResultsModal" class="modal">
      <div class="modal-content">
        <h3>Testergebnisse</h3>
        <div id="testResultsContent" style="max-height:60vh; overflow:auto;"></div>
        <div style="text-align:center; margin-top:10px;">
          <button id="copyTestErrorsBtn">Fehlermeldungen kopieren</button>
        </div>
      </div>
    </div>

  </body>
</html>
